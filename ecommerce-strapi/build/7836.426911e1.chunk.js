"use strict";(self.webpackChunkecommerce=self.webpackChunkecommerce||[]).push([[7836],{47836:(p,g,s)=>{s.r(g),s.d(g,{InformationBoxEE:()=>X});var t=s(19968),a=s(79632),l=s(94248),I=s(95080),e=s(48936),L=s(65092),A=s(9544),d=s(56104),W=s(63358),Y=s(89296),z=s(79080),G=s(74264),w=s(14632),y=s(29384),o=s(58984),H=s(62552),Q=s(56456),m=s(6484),T=s(1844),N=s(85240),$=s(54320),k=s(5240),b=s(91892),q=s(36196),ss=s(20880),ts=s(21424),as=s(70516),os=s(31812),ns=s(18424),es=s(52540),_s=s(21968),ls=s(12132),is=s(48632),rs=s(85676),Es=s(35184),ds=s(99568),Ms=s(96556),Os=s(13192),Ds=s(30840),Ps=s(77784),gs=s(79371),ms=s(67888),vs=s(52600),Cs=s(95752),hs=s(37388),As=s(61840),cs=s(49108),Is=s(44632),Ls=s(50840),Ws=s(20252),Ts=s(86432),Rs=s(22612),Bs=s(24808),fs=s(24024),Us=s(40960),Ks=s(33656),us=s(43280),ys=s(79804),js=s(19632),xs=s(29576),Ss=s(61152),ps=s(9589),ws=s(45488),Ns=s(75516);const V=()=>{const{initialData:_,layout:i,isSingleType:v,onChange:j}=(0,a.O_)(),r=(0,l.j)(n=>n.admin_app.permissions),{formatMessage:E}=(0,w.c)(),{_unstableFormatAPIError:x}=(0,a.An)(),S=(0,a.eo)(),{allowedActions:{canRead:R},isLoading:c}=(0,a.aU)(r.settings?.users),{data:C,isLoading:B,isError:f}=(0,l.k)({},{skip:c||!R}),M=C?.users||[],O=_?.[o.A]??null,[D,{error:U,isLoading:K}]=(0,y.u)(),u=async n=>{const P=await D({slug:v?"single-types":"collection-types",model:i.uid,id:_.id,data:{id:n?parseInt(n,10):null}});"data"in P&&(j?.({target:{type:"",name:o.A,value:P.data[o.A]}},!0),S({type:"success",message:{id:"content-manager.reviewWorkflows.assignee.notification.saved",defaultMessage:"Assignee updated"}}))};return(0,t.jsx)(I.I,{name:o.A,id:o.A,children:(0,t.jsx)(e.C,{direction:"column",gap:2,alignItems:"stretch",children:(0,t.jsx)(L.k1,{clearLabel:E({id:"content-manager.reviewWorkflows.assignee.clear",defaultMessage:"Clear assignee"}),error:(f&&R&&E({id:"content-manager.reviewWorkflows.assignee.error",defaultMessage:"An error occurred while fetching users"})||U&&x(U))??void 0,disabled:!c&&!B&&M.length===0,name:o.A,id:o.A,value:O?O.id.toString():null,onChange:u,onClear:()=>u(null),placeholder:E({id:"content-manager.reviewWorkflows.assignee.placeholder",defaultMessage:"Select \u2026"}),label:E({id:"content-manager.reviewWorkflows.assignee.label",defaultMessage:"Assignee"}),loading:B||c||K,children:M.map(n=>(0,t.jsx)(A.m,{value:n.id.toString(),textValue:(0,l.l)(n,E),children:(0,l.l)(n,E)},n.id))})})})},J=()=>{const{initialData:_,layout:i,isSingleType:v,onChange:j}=(0,a.O_)(),{formatMessage:r}=(0,w.c)(),{_unstableFormatAPIError:E}=(0,a.An)(),x=(0,a.eo)(),{data:S,isLoading:R}=(0,y.a)({slug:v?"single-types":"collection-types",model:i.uid,id:_.id},{skip:!_?.id||!i?.uid}),{meta:c,stages:C=[]}=S??{},{getFeature:B}=(0,Q.u)(),[f,M]=H.useState(null),O=B("review-workflows")??{},D=_?.[o.S]??null,[U,{error:K}]=(0,y.b)(),u=async P=>{try{if(O?.[T.C]&&parseInt(O[T.C],10)<(c?.workflowCount??0))M("workflow");else if(O?.[T.a]&&parseInt(O[T.a],10)<C.length)M("stage");else if(_.id&&i){const h=await U({model:i.uid,id:_.id,slug:v?"single-types":"collection-types",data:{id:P}});"data"in h&&(j?.({target:{name:o.S,value:h.data[o.S],type:""}},!0),x({type:"success",message:{id:"content-manager.reviewWorkflows.stage.notification.saved",defaultMessage:"Review stage updated"}}))}}catch{}},{themeColorName:n}=(0,N.g)(D?.color)??{};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(I.I,{hint:C.length===0&&r({id:"content-manager.reviewWorkflows.stages.no-transition",defaultMessage:"You don\u2019t have the permission to update this stage."}),name:o.S,id:o.S,children:(0,t.jsxs)(e.C,{direction:"column",gap:2,alignItems:"stretch",children:[(0,t.jsx)(d.K_,{disabled:C.length===0,error:K&&E(K)||void 0,name:o.S,id:o.S,value:D?.id,onChange:u,label:r({id:"content-manager.reviewWorkflows.stage.label",defaultMessage:"Review stage"}),startIcon:D&&(0,t.jsx)(e.C,{as:"span",height:2,background:D?.color,borderColor:n==="neutral0"?"neutral150":void 0,hasRadius:!0,shrink:0,width:2,marginRight:"-3px"}),customizeContent:()=>(0,t.jsxs)(e.C,{as:"span",justifyContent:"space-between",alignItems:"center",width:"100%",children:[(0,t.jsx)(W.O,{textColor:"neutral800",ellipsis:!0,children:D?.name??""}),R?(0,t.jsx)(Y.c,{small:!0,style:{display:"flex"},"data-testid":"loader"}):null]}),children:C.map(({id:P,color:h,name:F})=>{const{themeColorName:Z}=(0,N.g)(h)??{};return(0,t.jsx)(d.kH,{startIcon:(0,t.jsx)(e.C,{height:2,background:h,borderColor:Z==="neutral0"?"neutral150":void 0,hasRadius:!0,shrink:0,width:2}),value:P,textValue:F,children:F},P)})}),(0,t.jsx)(z.o,{}),(0,t.jsx)(G.Q,{})]})}),(0,t.jsxs)(m.L.Root,{isOpen:f==="workflow",onClose:()=>M(null),children:[(0,t.jsx)(m.L.Title,{children:r({id:"content-manager.reviewWorkflows.workflows.limit.title",defaultMessage:"You\u2019ve reached the limit of workflows in your plan"})}),(0,t.jsx)(m.L.Body,{children:r({id:"content-manager.reviewWorkflows.workflows.limit.body",defaultMessage:"Delete a workflow or contact Sales to enable more workflows."})})]}),(0,t.jsxs)(m.L.Root,{isOpen:f==="stage",onClose:()=>M(null),children:[(0,t.jsx)(m.L.Title,{children:r({id:"content-manager.reviewWorkflows.stages.limit.title",defaultMessage:"You have reached the limit of stages for this workflow in your plan"})}),(0,t.jsx)(m.L.Body,{children:r({id:"content-manager.reviewWorkflows.stages.limit.body",defaultMessage:"Try deleting some stages or contact Sales to enable more stages."})})]})]})},X=()=>{const{isCreatingEntry:_,layout:i}=(0,a.O_)(),v=i?.options?.reviewWorkflows??!1;return(0,t.jsxs)(l.I.Root,{children:[(0,t.jsx)(l.I.Title,{}),v&&!_&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(J,{}),(0,t.jsx)(V,{})]}),(0,t.jsx)(l.I.Body,{})]})}},85240:(p,g,s)=>{s.d(g,{a:()=>I,g:()=>l});var t=s(15520),a=s(1844);function l(e){if(!e)return null;const A=Object.entries(t.g.colors).filter(([,d])=>d.toUpperCase()===e.toUpperCase()).reduce((d,[W])=>(a.S?.[W]&&(d=W),d),null);return A?{themeColorName:A,name:a.S[A]}:null}function I(){return Object.entries(a.S).map(([e,L])=>({hex:t.g.colors[e].toUpperCase(),name:L}))}},58984:(p,g,s)=>{s.d(g,{A:()=>a,S:()=>t});const t="strapi_stage",a="strapi_assignee"}}]);
